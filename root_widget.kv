#:kivy 2.0.0
#:include popup_confirm_add.kv
#:include panel_add_ingredient.kv
#:include panel_application_info.kv
#:include panel_front_page.kv
#:include panel_ingredients_data.kv
#:include rd_templates.kv


RootWidget:


<RootWidget@Widget>:
    front_widget: front_widget
    menu: menu
    ingredients_data_panel: ingredients_data_panel
    add_ingredient_button: add_ingredient_button
    return_button: return_button
    add_ingredient_panel: add_ingredient_panel
    app_info: app_info
    scrollview_menu_drop_box: scrollview_menu_drop_box
    scrollview_suggestions_box: scrollview_suggestions_box
    debug_button: debug_button

    FrontWidget:
        id: front_widget

    Menu:
        id: menu

    IngredientsDataPanel:
        id: ingredients_data_panel

    AddIngredientButton:
        id: add_ingredient_button

    ReturnButton
        id: return_button

    AddIngredient:
        id: add_ingredient_panel

    AppInfo:
        id: app_info

    MenuDropBox:
        id: scrollview_menu_drop_box

    SuggestionBox:
        id: scrollview_suggestions_box

    Button:
        shown: True   # For hiding and showing the button.
        id: debug_button
        markup: True
        padding: 5, 12
        text: "[b][size=20dp]Debug Mode"
        on_release: import pdb; pdb.set_trace()


<SuggestionBox@ScrollView>:
    do_scroll_x: False
    suggestions_box: suggestions_box

    MyGrid:
        id: suggestions_box

        canvas:

            Color:
                rgba: 47/255, 47/255, 30/255, 1

            Rectangle:
                pos: self.pos
                size: self.size


<Menu>:
    text: "Menu"
    padding: dp(5), dp(5)
    size: self.texture_size
    on_release: self.toggle_box_drop()
    drop_box: 'shown'  # Valid strings are 'shown' and 'hidden' only.


<MenuDropBox>:
    do_scroll_x: False
    menu_drop_box: menu_drop_box
    default_width: 0  # Note! 'main_menu.py' @ line 16

    MyGrid:
        id: menu_drop_box

        canvas:

            Color:
                rgba: 0/255, 17/255, 51/255, 1

            Rectangle:
                pos: self.pos
                size: self.size

        MenuBoxButton:
            size_hint: None, 1
            text_size: None, self.height
            background_color: 0/255, 34/255, 102/255, 1
            text: "[b]Manage Ingredients"
            on_release: root.parent.ingredients_data_panel.toggle_page()

        MenuBoxButton:
            size_hint: None, 1
            text_size: None, self.height
            background_color: 0/255, 34/255, 102/255, 1
            text: "[b]Application Info"
            on_release: root.parent.app_info.toggle_page()
