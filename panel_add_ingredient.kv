#:include rd_templates.kv


<PanelLabel@Label>:
    size_hint_y: None
    height: dp(40)
    markup: True
    text_size: self.width, None
    halign: 'center'
    padding: dp(20), dp(0)


<MyTextInput@TextInput>:
    size_hint_y: None
    height: dp(30)
    multiline: False
    focus: True


<EffectsButton@Button>:
    size_hint_y: None
    height: dp(40)


<MySpinner@Spinner>:
    size_hint_y: None
    height: dp(30)


<AddIngredient>:
    shown: False   # For hiding and showing the page.
    # Other attributes are set or updated at "main.py" > "AlchemyBooklet" >
    # "_post_update".

    panel_grid: panel_grid

    canvas.before:
        Color:
            rgb: 48/255, 48/255, 48/255

        Rectangle:
            size: self.size
            pos: self.pos

    MyGrid:
        row_default_height: 0
        id: panel_grid

        PanelLabel:
            text: "[b][size=24dp]Add Ingredient"

        MyTextInput:
            id: name
            hint_text: 'Ingredient Name i.e. "Epic Herb"'

        MyTextInput:
            id: value
            hint_text: 'Value i.e. "3"'

        MyTextInput:
            id: weight
            hint_text: 'Weight i.e. "0.2"'

        MyTextInput:
            id: obtained_at
            hint_text: 'Obtained at i.e. "Found near epic mountain."'

        PanelLabel:
            text: '[b][size=24dp]Effects'
            halign: 'left'
            padding: dp(10), dp(10)

        MyGrid:
            cols: 2

            MySpinner:
                id: primary_effect
                text: 'Primary Effect'
                values: root.return_effects()

            MySpinner:
                id: secondary_effect
                text: 'Secondary Effect'
                values: root.return_effects()

            MySpinner:
                id: tertiary_effect
                text: 'Tertiary Effect'
                values: root.return_effects()

            MySpinner:
                id: quaternary_effect
                text: 'Quaternary Effect'
                values: root.return_effects()

            MyTextInput:
                id: custom_primary_effect
                hint_text: 'Custom Primary Effect'
                disabled: True if not primary_effect.text == 'Custom' else False

            MyTextInput:
                id: custom_secondary_effect
                hint_text: 'Custom Secondary Effect'
                disabled: True if not secondary_effect.text == 'Custom' else False

            MyTextInput:
                id: custom_tertiary_effect
                hint_text: 'Custom Tertiary Effect'
                disabled: True if not tertiary_effect.text == 'Custom' else False

            MyTextInput:
                id: custom_quaternary_effect
                hint_text: 'Custom Quaternary Effect'
                disabled: True if not quaternary_effect.text == 'Custom' else False

        PanelLabel:
            text: "[b][size=24dp]Adding Notes.."
            halign: 'left'
            padding: dp(10), dp(10)

        PanelLabel:
            id: note_text
            text: f"[b][size=18dp]    1. Fill up all the required entries.\n    2. Type your ingredient information neatly and concisely.\n    3. Ingredient name must not be one that is already in the database. This will result in failing to add the ingredient to the database.\n    4. Each time you add a new custom ingredient with a custom effect/s. The effect/s will be added to the list of options inside the dropbox for choosing an effect for the ingredient."
            halign: 'left'
            padding: dp(15), dp(0)

        MyGrid:
            cols: 3
            spacing: dp(30), dp(0)

            Button:
                size_hint_y: None
                height: dp(40)
                markup: True
                text: '[b][size=24dp]Cancel'
                on_release: root.toggle_page()

            Button:
                size_hint_y: None
                height: dp(40)
                markup: True
                text: '[b][size=24dp]Reset Entries'
                on_release: root._reset_entries()

            Button:
                markup: True
                size_hint_y: None
                height: dp(40)
                text: '[b][size=24dp]Add Ingredient'
                on_release: root.add_ingredient()
